#!/usr/bin/env java org.mozilla.javascript.tools.shell.Main

load("core.js");

// this adds the relative path "lib" to the search paths.
// you should change it to an absolute path so you can load libraries from anywhere
$p.push("lib");

require("roundabout");

function main() {
    
    if (ARGV.length < 1)
        printUsage();

    var config = ARGV[0];
        configFile = readFile(config)
    
    if (!configFile)
        throw new Error("configuration " + config + " not found");

    eval(configFile);

    Roundabout.run();
}

function printUsage() {
    throw new Error("Usage: roundup [roundup config]");
}

try {
    main();
} catch (e) {
    print(e.message);
}
